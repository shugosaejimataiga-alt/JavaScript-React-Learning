
🟦 Day30：localStorageとは何か

今日のゴール
**「ページを閉じてもデータが残る理由」**を言葉で説明できる
状態（配列など）と保存先は別物だと理解する


なぜ localStorage を学ぶのか

これまでの学習では、
配列（状態）を変える
再描画して画面に反映する
ここまでは ページを開いている間だけ 成り立っていました。

👉 でも実際のアプリは
リロードしてもデータが消えない 必要があります。
そのために使うのが localStorage です。



超重要な考え方（ここが核心）

状態（配列・オブジェクト）：アプリの本体

localStorage：その状態を一時的に保存する置き場


localStorage は
👉 状態そのものではない
👉 状態を保存しておく棚
です。

ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー

## 1.基本の書き方（保存と取得）


**保存する（setItem）**


localStorage.setItem("test", "hello");


意味：

"test"：名前（キー）
"hello"：保存する文字列

👉 必ず文字列で保存される



**取り出す（getItem）**


const value = localStorage.getItem("test");
console.log(value);


結果：

hello



**ここで超重要な事実（1点だけ）**

localStorage.setItem("num", 123);


これはエラーになりませんが、
中ではこうなっています：

"123"


👉 数値・配列・オブジェクトはそのままでは保存できない



**今日の書き方まとめ（暗記不要）**

保存：setItem(名前, 文字列)

取得：getItem(名前)

localStorage は 文字列専用

ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー

## 1-2.練習問題

質問
次のコードの console.log の結果は何になりますか？


localStorage.setItem("color", "red");
const c = localStorage.getItem("color");
console.log(c);


答えをそのまま書いてください。


解答：red

正解です。
では 次の一段階 に進みます。


ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー

## 2.基本の書き方

配列・オブジェクトを保存する方法

・問題点の整理
localStorage は 文字列しか保存できない。
でも状態は 配列・オブジェクト。

👉 そのままでは保存できません。


解決策

JSON を使って変換する

保存前：配列 → 文字列
取得後：文字列 → 配列



**配列を保存する（JSON.stringify）**

const fruits = ["りんご", "みかん"];

localStorage.setItem(
  "fruits",
  JSON.stringify(fruits)
);


実際に保存されている中身（イメージ）：

["りんご","みかん"]

※ これは 文字列



**取り出して元に戻す（JSON.parse）**

const saved = localStorage.getItem("fruits");
const fruitsArray = JSON.parse(saved);

console.log(fruitsArray);


結果：

["りんご", "みかん"]

👉 配列に戻る



**ここでの超重要ポイント（1行）**

localStorage ⇄ 状態 の間には「変換」が必ず入る

ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー

## 2-1.練習問題

次のコードの console.log の結果は何ですか？


const data = ["A", "B"];

localStorage.setItem("data", JSON.stringify(data));

const result = JSON.parse(
  localStorage.getItem("data")
);

console.log(result);


そのまま答えてください。


解答：["A", "B"]


ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー

全体の流れ（超重要）
① 状態（配列）
② JSON.stringify で文字列化
③ localStorage に保存

── リロード ──

④ localStorage から取得
⑤ JSON.parse で元に戻す
⑥ 状態として使う
⑦ 再描画

ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー

🟦 Day30 振り返りまとめ


今日やったこと・学んだこと

データ（状態）と画面は別物であると理解した
再描画は画面を作り直すだけで、データは消えない
リロードはJSが最初から実行され、データは消える
消えたデータをリロード後に戻すための箱が localStorage
localStorage は データそのものではなく、保険用の保存場所
DBやcookieとは役割が違い、フロントエンド内だけの保存である


重要な考え方（核心）

本体：データ
表示：結果
保存：別責務（localStorage）

👉 これらを混ぜないことが壊れない設計につながる。


今回の疑問と整理

「覚える必要があるのか？」
→ 暗記不要。
→ 覚えるのは 役割1行だけで十分。

localStorage の覚え方
→ 「リロードで消えるデータを、あとで戻すための箱」


今日の結論（1文）

データを本体として扱い、画面と保存を分けて考える土台を学んだ。