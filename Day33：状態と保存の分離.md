
## 1.今回の学習の説明（Day33）

結論だけ先に

状態（state）＝ 今アプリが使っているデータ
保存（storage）＝ 消えないように保管する場所

この2つは役割が違うので、分けて考える


なぜ分ける？

画面表示や操作は 状態 を見る
ページを閉じても残したいから 保存 がある
保存を直接いじると、画面が壊れやすい


👉 正解の流れ

保存 → 状態に読み込む → 状態を変更 → 画面更新 → 必要なら保存

ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー

## 2.基本の書き方（最小）


// 状態（アプリの本体）

let todos = [];


// 起動時：保存 → 状態

function loadTodos() {
  todos = JSON.parse(
    localStorage.getItem("todos") || "[]"
  );
}


// 保存：状態 → 保存

function saveTodos() {
  localStorage.setItem(
    "todos",
    JSON.stringify(todos)
  );
}


**重要ポイント**

todos を直接触るのは アプリ内部だけ

localStorage は
読み込み用（load）
保存用（save）
に限定する

ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー

## 3.練習問題（考えてください）

問題

次の操作のうち、
「状態だけ変更する」ものはどれですか？

A. todos.push("散歩")
B. localStorage.setItem("todos", "...")
C. JSON.parse(localStorage.getItem("todos"))

👉 答えは1つだけです。
アルファベットで答えてください。


解答：AとC


結論から言うと 正解は A だけ です。
C は違います。


**なぜ A は正しいか**

todos.push("散歩")


todos という 状態（アプリの本体） を直接変更している

保存や取得はしていない
👉 純粋に「状態変更」


**なぜ C は違うか**

JSON.parse(localStorage.getItem("todos"))


これは 保存されているデータを読み出して変換しているだけ

まだ todos に代入していない
👉 状態は変わっていない


※ 状態変更になるのはこう書いたとき：

todos = JSON.parse(localStorage.getItem("todos"))

ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー

## 4.次へ進む前の1問（確認）

次のうち
**「状態と保存が分離できていて正しい設計」**はどれですか？

A.

localStorage.setItem("todos", JSON.stringify(todos));
render();



B.

todos.push("散歩");
render();
saveTodos();


👉 1つだけ選んでください。



解答：Bではないですか？
状態、画面更新、保存と分けられているから


その理解で 完全に正しいです。正解は B です。

理由も、あなたが書いてくれた説明そのものが核心です👇



**なぜ A はダメか（重要）**

localStorage.setItem("todos", JSON.stringify(todos));
render();


状態をどう変えたかが見えない
保存が先に来ている
「何が起きたか」がコードから読めない

👉 保守できない・バグりやすい構造